
<?php

require('../includes/common/common.php');

class registerClass
{

    static function getRESForm()
    {
        ?>
        
        <h1 align="center">TIPPING TREES</h1>

                                                                                            <!--<div class="9u mobileUI-main-content">-->
												<section>

													<div id="slider">
														<div class="viewer">
															<div class="reel">
																<div class="slide">
																	<a class="link" href="#branch-branchBasic">Public Profiles Facilitate Secure Connections</a>
																	<img src="img/RESscreenshot/People_Profile.png" width="782" height="379" alt="" />
																</div>
																<div class="slide">
																	<a class="link" href="#branch-branchBasic">Each Member has an Industry Strength OpenSSL/OpenSSH Compatible Secure Credentials</a>
																	<img src="img/RESscreenshot/People_Profile_Mouseover.png" width="782" height="379" alt="" />
																</div>
																<div class="slide">
																	<a class="link" href="#branch-branchBasic">Trust is Verified and Grown over Time</a>
																	<img src="img/RESscreenshot/PublicProfile_Mouseover.png" width="782" height="379" alt="" />
																</div>
																<div class="slide">
																	<a class="link" href="#branch-branchBasic">Encrypted Communication</a>
																	<img src="img/RESscreenshot/Messages_Composition.png" width="782" height="379" alt="" />
																</div>
																<div class="slide">
																	<a class="link" href="#branch-branchBasic">Verify and Read Your Messages</a>
																	<img src="img/RESscreenshot/Messages_Read.png" width="782" height="379" alt="" />
																</div>
																<div class="slide">
																	<a class="link" href="#branch-branchBasic">Create Secure Groups to Share with Friends and Associates</a>
																	<img src="img/RESscreenshot/Chat.png" width="782" height="379" alt="" />
																</div>
																<div class="slide">
																	<a class="link" href="#demo-demoDB">Zero Knowledge: Encrypt Data and Connections</a>
																	<img src="img/info/ZeroKnowledge.png" width="782" height="379" alt="" />
																</div>
                                                                <div class="slide">
                                                                    <a class="link" href="#about-aboutFeatures">Anonymously Encrypt Messages "For Your Eyes Only"</a>
                                                                    <img src="img/RESscreenshot/FYEO_Opened.png" width="782" height="379" alt="" />
                                                                </div>
                                                                <div class="slide">
                                                                    <a class="link" href="#branch-branchBasic">Search for Friends and Contacts</a>
                                                                    <img src="img/RESscreenshot/SearchForContacts.png" width="782" height="379" alt="" />
                                                                </div>
                                                                <div class="slide">
                                                                    <a class="link" href="#branch-branchBasic">You Control All Your Data</a>
                                                                    <img src="img/RESscreenshot/NoDecrypt.png" width="782" height="379" alt="" />
                                                                </div>
															</div>
														</div>
														<div class="shine"></div>
														<div class="indicator">
															<ul>
																<li>1</li>
																<li>2</li>
																<li>3</li>
																<li>4</li>
																<li>5</li>
																<li>6</li>
																<li>7</li>
                                                                <li>8</li>
                                                                <li>9</li>
                                                                <li>10</li>
                                                                
																
															</ul>
														</div>
													</div>
													
												</section>
											<!--</div>-->
        
        <div class="clear" style="padding-top: 40em"></div>

        <?php /*<table>
            <tr>
                <td width="50%"> */ ?>
        <div class="5grid-layout">
            <div class="row">

                <div class="4u">

                    <ul class="style4">
                        <li><h3>Web of Trust Profiles Facilitate Secure Connections</h3>
                            <p>Your Public Profile displays your Web Reputation Scores and shares your verified public cryptography credentials with friends and potential networking contacts. Profiles are linked by connections in a Web of Trust.</p>
                        </li>
                        <li><h3>Each Member has an Industry Strength OpenSSL/OpenSSH Compatible Secure Credentials</h3>
                            <p>Industry standard RSA-2048 keys are generated and encrypted on your computer. Your plaintext RSA private key never touches the Tipping Trees server.</p>
                        </li>
                        <li><h3>Trust is Verified and Grown over Time</h3>
                            <p>Your Web Reputation Scores grow over time as more members connect with you, digitally signing your account.</p>
                        </li>
                        <li><h3>Strong End-to-End Encryption</h3>
                            <p>All communication is end-to-end encrypted (encrypted on the sender comptuer and decrypted only on the recipient computer) with RSA-2048 (Stanford code libraries) for key exchange, AES-128 (Google code libraries) symmetric encryption, and SHA-256 (pidCrypt code libraries) for message signing.</p>
                        </li>
                        <li><h3>Verify and Read Your Messages</h3>
                            <p>Every communication and interaction is both encrypted and authenticated. You may communicate privately and securely, with high confidence that no one can spoof your contacts (man-in-the-middle attack).</p>
                        </li>
                    </ul>

                <?php /*</td>
                <td width="50%"> */ ?>
                </div>
                <div class="4u">

                    <ul class="style4">
                        <li><h3>Zero Knowledge: Encrypt Data and Connections</h3>
                            <p>Other services encrypt only your data. Tipping Trees encrypts both your data and connections. Check out our <a href="#demo-demoDB">patent pending Zero Knowledge</a> database design to see how we protect your data, even from Tipping Trees itself.</p>
                        </li>
                        <li><h3>Create Secure Groups to Share with Friends and Associates</h3>
                            <p>You are in full control. Each user can create secure groups. The shared data and even the members of the group are hidden from view in the <a href="#demo-demoDB">Zero Knowledge</a> database. </p>
                        </li>
                        <li><h3>You Control All Your Data</h3>
                            <p>Any service that can reset your password has control of your data. Companies claim to be  ethical, but do you really trust their "privacy policies" now, and in the years to come? Do you trust politicians to respect your digital rights now, and in the years to come? Tipping Trees has no data to share. This is what <a href="#demo-demoDB">Zero Knowledge</a> means. Your password is securely encrypted before it even leaves your computer. Your RSA key is only decrypted on your computer with your password (which never touches the Tipping Trees server, or even the SSL tunnel). You are always in full control of your data and identity on Tipping Trees.</p>
                        </li>
                        <li><h3>Search for Friends and Contacts</h3>
                            <p>Easily build your private network by inviting your friends and contacts. Send invitations to others you wish to connect with securely.</p>
                        </li>
                        <li><h3>Anonymously Encrypt Messages "For Your Eyes Only"</h3>
                            <p>Even before you join the Tipping Trees Web of Trust, you can browse your friends' and associates' Public Profile pages, and securely encrypt messages "For Your Eyes Only."</p>
                        </li>                        
                    </ul>
                </div>
            </div>
        </div>

        <?php /*

                </td>
            </tr>
        </table> */ ?>

        <?php /*
        <table width="100%">
            <tr valign="top">
                <td width="67%" align="left">
                    <h2>A FREE & OPEN SECURE NETWORKING SERVICE</h2>
                    <ul class="acklist">
                        <li>Chat with & message your contacts using client-side, industry-standard cryptography</li>
                        <?php // <li>Accept monetary micro-contributions from anyone & make micro-contributions to anyone</li> ?>
                        <li>Establish a verifiable online identity associated with a 2048-bit RSA encryption key. </li>
                        
                    </ul>
                </td>
                <td width="33%" align="right">
                    <?php registerClass::inviteForm(); ?>
                </td>
            </tr>
        </table>
        //*/ ?>
        
        <?php /*<p></p>
        <p></p>
        <p>Currently an invitation from a Tipping Trees member is needed to join. If you don't know any members yet, you can send a request for an invitation to <a href="mailto:service@tippingtrees.com">service@tippingtrees.com</a>.</p>
        <p>Please send your request from the email you wish to associate with your Tipping Trees account.</p> */ ?>
        
        <?php
    }
    
    static function getForm()
    {
        ?>
        <h1 align="center">TIPPING TREES</h1>
        <div class="clear"></div>
        <table width="100%">
            <tr valign="top">
                <td width="67%" align="left">
                    <h2>A FREE & OPEN SECURE NETWORKING SERVICE</h2>
                    <ul class="acklist">
                        <li>Chat with & message your contacts using client-side, industry-standard cryptography</li>
                        <?php // <li>Accept monetary micro-contributions from anyone & make micro-contributions to anyone</li> ?>
                        <li>Establish a verifiable online identity associated with a 2048-bit RSA encryption key. </li>
                        
                    </ul>
                </td>
                <td width="33%" align="right">
                    <?php registerClass::inviteForm(); ?>
                </td>
            </tr>
        </table>
        
        <?php
    }
    
    static function inviteForm()
    {
	?>
	    
        <?php registerClass::getInviteJS(); ?>
	    
	    <?php registerClass::getInviteFormNoJS(); ?>
	    
	    
	<?php
	
    }

    static function getInviteFormNoJS()
    {
        ?>

        <form id="inviteRegForm" name="inviteRegForm">
        
        <?php //<h2>Register for Free</h2> ?>
        <label for="inviteRegEmail">Your Email:</label><br />
        <input type="text" size="50" maxlength="50" name="inviteRegEmail" id="inviteRegEmail" class="rounded" /><br />
        <input type="button" class="button button-medium" value="Sign Up" onClick="sendRegInvitation();" />
        
        </form>

        <?php
    }

    static function getInviteJS()
    {
        ?>
        <script type="text/javascript">
        function sendRegInvitation()
        {
            var userVars = document.inviteRegForm;
            
            var argstr = 'page=regInvite&email='+encodeURIComponent(userVars.inviteRegEmail.value);
            //$.ttPOST('inviteReg',argstr,function(r){
            PostAjaxRequest(function() {
                        
                //console.log(this);
                var trimmed = $.trim(this);
                //alert(trimmed);
                var data = jQuery.parseJSON(trimmed);
                
                if (data.status == 0) {
                    statusMessage(data.error);
                } else {
                    statusMessage(data.msg);
                }
                
                userVars.inviteRegEmail.value = "";
                //userVars.inviteText.value = "";
                
            
            },'ajaxPublic.php',argstr);
            //});
        }
        </script>
        <?php
    }
    
    static function inviteRequest($email)
    {
        $clean_email = sanitize::db($email);
        
        if(!filter_var($clean_email, FILTER_VALIDATE_EMAIL)) {
            return array('status' => 0,
                         'error' => 'Invalid email address');
        }
        
        return peopleClass::sendInvitation($email,'Welcome! Here is your personal invitation to Tipping Trees:',76,'Welcome to Tipping Trees');
    
    // log an invitation Request    
        //$dbc = dbconnector::getConnection();
        //
        //// see if email is already registered
        //$qr = "SELECT * FROM users WHERE email='$clean_email'";
        //$rr = mysqli_query($dbc,$qr);
        //if ($rr) {
        //    $numentries = mysqli_num_rows($rr);
        //    if ($numentries > 0) {
        //        return array('status' => 0,
        //                     'error' => 'This email is already registered with Tipping Trees.');
        //    }
        //}
        //
        //// see if an invitation already exists for this email
        //$qs = "SELECT * FROM invitationRequests WHERE email='$clean_email'";
        //$rs = mysqli_query($dbc,$qs);
        //
        //$numrows = 0;
        //if ($rs) {
        //    $numrows = mysqli_num_rows($rs);
        //}
        //
        //if ($numrows == 0) {
        //    $q = "INSERT INTO invitationRequests (email,post_time) VALUES ('$clean_email',UTC_TIMESTAMP())";
        //    $r = mysqli_query($dbc,$q);
        //} 
        //
        //mysqli_close($dbc);
        //
        //return array('status' => 1,
        //             'msg' => 'Invitation request has been logged for ' . $clean_email);
        
    }

}


?>
